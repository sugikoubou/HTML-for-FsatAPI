<html lang="ja">
<head>
    <title>Upload</title>
</head>
<body>

    <div>
		<h1>APIにPOST</h1>
		<form method="post" action="https://2888-153-252-13-4.ngrok-free.app/api/predict" enctype="multipart/form-data">
		<input type="file" id="file" name="file" accept="image/*" />
		
		<input type="submit">
		</form>
		<br></br>
		
		

	</div>
    <button id="btn">Upload</button>
    <img id="gazou" src="nakanoya (31).jpg">
    
    <div></div>
    
    <script type="text/javascript">
    const sendfile = function(e) {
        
        const img = document.getElementById("gazou");    //画像オブジェクト作成

        // HTMLImageElement オブジェクトを作成する
        var image = new Image();

        // URL を指定して、画像の読み込みを開始する
        image.src = "nakanoya (31).jpg";


        
        const fd = new FormData();
        fd.append("file", image, "test.jpg");

        fetch('https://76cf-2400-4150-4341-1f00-b562-68d1-b7c1-fd5e.ngrok-free.app/api/predict', {
            method: 'POST',
            body: fd
            
        })


        /*
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
            var result = document.querySelector('div');
            xmlhttp.onload = function () {
                result.innerHTML = xmlhttp.responseText;
            };
        };
        xmlhttp.open("POST", "https://a13a-2400-4150-4341-1f00-b562-68d1-b7c1-fd5e.ngrok-free.app/api/predict", true);
        xmlhttp.send(img);
        */
        
    }
    let btn = document.getElementById("btn");
    btn.addEventListener("click", sendfile);    
    </script>
    
</body>
</html>
